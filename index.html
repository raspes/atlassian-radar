<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlassian Radar Reporte</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', system-ui, sans-serif;
        }
        /* Estilos personalizados para el selector (form-select) */
        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%236B7280'%3e%3cpath d='M7 7l3-3 3 3m0 6l-3 3-3-3' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }
        .form-select:focus {
            --tw-ring-color: #3B82F6; /* blue-500 */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-600 antialiased min-h-screen flex flex-col items-center">

    <div class="w-full max-w-4xl px-4 py-8">

        <!-- Navegación Histórica -->
        <div class="bg-white shadow-sm rounded-lg border border-slate-200 p-4 mb-6">
            <label for="history-select" class="block text-sm font-medium text-slate-700 mb-2">
                Navegar por reportes anteriores:
            </label>
            <select id="history-select" class="form-select block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md transition duration-150 ease-in-out">
                <option value="" disabled selected>Cargando archivos...</option>
            </select>
        </div>

        <!-- Contenido del Reporte -->
        <div class="bg-white shadow-md rounded-lg border border-slate-200 p-8">
            <article class="text-slate-600 leading-relaxed">
                <!-- El contenido de Markdown proporcionado se ha convertido a HTML semántico con estilos Tailwind -->
                <h1 class="text-3xl font-bold text-slate-800 mb-6">Overview del Atlassian Radar</h1>
                <p class="mb-4">
                    Este documento proporciona una visión general del Atlassian Radar, destacando sus componentes clave y su propósito.
                    Sirve como una guía rápida para entender la estructura y la importancia de esta iniciativa.
                </p>

                <h2 class="text-2xl font-semibold text-slate-800 mt-8 mb-4">Propósito y Filosofía</h2>
                <p class="mb-4">
                    El Atlassian Radar tiene como objetivo principal mantener a nuestros equipos informados sobre las tecnologías emergentes,
                    las mejores prácticas y las tendencias del mercado que podrían afectar o beneficiar nuestros productos y procesos.
                    Se basa en la idea de un <strong class="font-semibold text-slate-700">ciclo continuo de aprendizaje y adaptación</strong>.
                </p>
                <ul class="list-disc ml-6 mb-4">
                    <li class="mb-2">Fomenta la innovación y la experimentación.</li>
                    <li class="mb-2">Reduce la deuda tecnológica al identificar riesgos tempranamente.</li>
                    <li class="mb-2">Promueve la colaboración y el intercambio de conocimientos.</li>
                </ul>

                <h3 class="text-xl font-medium text-slate-800 mt-6 mb-3">Componentes Clave</h3>
                <p class="mb-4">
                    El Radar se compone de varios elementos que interactúan para proporcionar una imagen completa:
                </p>
                <ol class="list-decimal ml-6 mb-4">
                    <li class="mb-2">
                        <strong class="font-semibold text-slate-700">Tecnologías</strong>: Herramientas, lenguajes, frameworks.
                    </li>
                    <li class="mb-2">
                        <strong class="font-semibold text-slate-700">Técnicas</strong>: Patrones, metodologías, prácticas.
                    </li>
                    <li class="mb-2">
                        <strong class="font-semibold text-slate-700">Plataformas</strong>: Infraestructura, servicios en la nube.
                    </li>
                    <li class="mb-2">
                        <strong class="font-semibold text-slate-700">Herramientas</strong>: Software, utilidades.
                    </li>
                </ol>

                <p class="mb-4">
                    Cada elemento se clasifica en uno de los cuatro anillos del Radar: <em class="italic text-slate-700">Adopt, Trial, Assess, Hold</em>.
                    Estos anillos indican el nivel de confianza y la recomendación de uso para nuestros equipos.
                </p>
                <blockquote class="border-l-4 border-slate-300 pl-4 italic text-slate-500 mb-4">
                    "El verdadero valor del Radar no reside en sus recomendaciones, sino en las conversaciones que genera."
                </blockquote>

                <h2 class="text-2xl font-semibold text-slate-800 mt-8 mb-4">Cómo Usar el Radar</h2>
                <p class="mb-4">
                    Se recomienda a los equipos consultar el Atlassian Radar regularmente al tomar decisiones sobre
                    nuevas tecnologías o al planificar el roadmap de un proyecto.
                </p>
                <ul class="list-disc ml-6 mb-4">
                    <li class="mb-2">
                        Para más detalles, visita el repositorio oficial del Atlassian Radar en
                        <a href="https://github.com/raspes/atlassian-radar" class="text-blue-600 hover:underline">GitHub</a>.
                    </li>
                    <li class="mb-2">
                        Considera contribuir con tus propias observaciones y experiencias.
                    </li>
                </ul>

                <p class="text-sm text-slate-500 mt-8">
                    Fecha de la última actualización: <time datetime="2023-10-27">27 de octubre de 2023</time>
                </p>
            </article>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const historySelect = document.getElementById('history-select');
            const githubUser = 'raspes';
            const githubRepo = 'atlassian-radar';
            const githubBranch = 'main';
            const apiUrl = `https://api.github.com/repos/${githubUser}/${githubRepo}/git/trees/${githubBranch}?recursive=1`;
            const baseUrl = `https://${githubUser}.github.io/${githubRepo}/`;

            fetch(apiUrl, {
                headers: {
                    'Accept': 'application/vnd.github.v3+json'
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status} ${response.statusText}`);
                }
                return response.json();
            })
            .then(data => {
                let htmlFiles = data.tree
                    .filter(file => file.path.endsWith('.html') && file.type === 'blob')
                    .map(file => file.path)
                    .filter(fileName => fileName !== 'index.html' && fileName !== '404.html');

                // Ordenar los archivos de más reciente a más antiguo (descendente por nombre)
                htmlFiles.sort((a, b) => b.localeCompare(a));

                // Limpiar la opción "Cargando archivos..."
                historySelect.innerHTML = '';

                // Añadir opción predeterminada
                const defaultOption = document.createElement('option');
                defaultOption.value = "";
                defaultOption.textContent = "Selecciona un reporte...";
                defaultOption.disabled = true;
                defaultOption.selected = true;
                historySelect.appendChild(defaultOption);

                if (htmlFiles.length === 0) {
                    const noFilesOption = document.createElement('option');
                    noFilesOption.value = "";
                    noFilesOption.textContent = "No se encontraron reportes anteriores.";
                    noFilesOption.disabled = true;
                    historySelect.appendChild(noFilesOption);
                } else {
                    htmlFiles.forEach(fileName => {
                        const option = document.createElement('option');
                        option.value = fileName;
                        
                        // Formatear el nombre del archivo para una mejor visualización (ej: "27 de octubre de 2023 - Reporte Mensual")
                        const dateMatch = fileName.match(/^(\d{4})-(\d{2})-(\d{2})-(.*)\.html$/);
                        if (dateMatch) {
                            const [, year, month, day, rest] = dateMatch;
                            const dateObj = new Date(year, month - 1, day); // month - 1 porque los meses son base 0
                            const options = { year: 'numeric', month: 'long', day: 'numeric' };
                            const formattedDate = dateObj.toLocaleDateString('es-ES', options);
                            // Capitalizar la primera letra de cada palabra en el resto del nombre
                            const formattedRest = rest.replace(/-/g, ' ').replace(/\b\w/g, char => char.toUpperCase());
                            option.textContent = `${formattedDate} - ${formattedRest}`;
                        } else {
                            // Alternativa si el nombre del archivo no sigue el patrón YYYY-MM-DD-nombre.html
                            option.textContent = fileName
                                .replace('.html', '')
                                .replace(/-/g, ' ')
                                .replace(/\b\w/g, char => char.toUpperCase());
                        }
                        historySelect.appendChild(option);
                    });
                }

                historySelect.onchange = (event) => {
                    const selectedValue = event.target.value;
                    if (selectedValue) {
                        window.location.href = baseUrl + selectedValue;
                    }
                };
            })
            .catch(error => {
                console.error('Error fetching repository files:', error);
                historySelect.innerHTML = ''; // Clear existing options
                const errorOption = document.createElement('option');
                errorOption.value = "";
                errorOption.textContent = "Error al cargar archivos.";
                errorOption.disabled = true;
                errorOption.selected = true; // Mostrar el error como opción seleccionada
                historySelect.appendChild(errorOption);
            });
        });
    </script>
</body>
</html>