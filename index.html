<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Avance del Proyecto Atlassian Radar</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        blue: {
                            500: '#0052cc', // Atlassian Blue
                            600: '#0065ff', // Atlassian Hover Blue
                            700: '#0921ff', // Darker Atlassian Blue
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom styles to ensure Atlassian feel for focus ring */
        .focus-ring-atlassian:focus {
            outline: none;
            border-color: #0052cc; /* Atlassian Blue */
            box-shadow: 0 0 0 3px rgba(0, 82, 204, 0.45); /* Atlassian Blue with transparency */
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen font-sans text-slate-600">

    <!-- Navegación Histórica Automática -->
    <header class="py-4 bg-white shadow-sm border-b border-slate-200">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between flex-wrap gap-4">
            <h1 class="text-xl font-semibold text-slate-800">Atlassian Radar</h1>
            <div class="flex items-center gap-2">
                <label for="historical-navigation" class="sr-only">Seleccionar Reporte Histórico</label>
                <select id="historical-navigation" class="block w-full min-w-[200px] sm:min-w-[250px] py-2 px-3 border border-slate-300 bg-white rounded-md shadow-sm focus-ring-atlassian sm:text-sm text-slate-700">
                    <option value="" disabled selected>Ver Reportes Anteriores</option>
                    <!-- Las opciones se cargarán aquí con JavaScript -->
                </select>
            </div>
        </div>
    </header>

    <!-- Contenido Principal del Reporte -->
    <main class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <div class="bg-white shadow-md rounded-lg border border-slate-200 p-8">
            <h1 class="text-3xl sm:text-4xl text-slate-800 font-bold mb-6">Reporte de Avance del Proyecto Atlassian Radar</h1>

            <h2 class="text-2xl sm:text-3xl text-slate-800 font-bold mb-4 mt-8">Introducción</h2>
            <p class="mb-4 leading-relaxed">Este reporte detalla los avances y las próximas etapas del proyecto <strong>Atlassian Radar</strong>, enfocado en la mejora continua de nuestras herramientas internas de desarrollo.</p>
            <p class="mb-4 leading-relaxed">El objetivo principal es optimizar los flujos de trabajo y la colaboración entre equipos.</p>

            <h3 class="text-xl sm:text-2xl text-slate-800 font-bold mb-3 mt-6">Hitos Logrados</h3>
            <ul class="list-disc ml-6 mb-4 space-y-2">
                <li><strong>Fase 1 Completada</strong>: Implementación inicial del nuevo módulo de gestión de tareas.</li>
                <li><strong>Integración Exitosa</strong>: Conexión con sistemas de CI/CD.</li>
                <li><strong>Capacitación</strong>: Sesiones de entrenamiento para los equipos de desarrollo A y B.</li>
            </ul>

            <h2 class="text-2xl sm:text-3xl text-slate-800 font-bold mb-4 mt-8">Próximos Pasos</h2>
            <ol class="list-decimal ml-6 mb-4 space-y-2">
                <li><strong>Despliegue General</strong>: Planificación para el lanzamiento a todos los equipos.</li>
                <li><strong>Recolección de Feedback</strong>: Establecer canales para la retroalimentación de los usuarios.</li>
                <li><strong>Fase 2 de Desarrollo</strong>: Inicio de las mejoras basadas en el feedback.</li>
            </ol>

            <h3 class="text-xl sm:text-2xl text-slate-800 font-bold mb-3 mt-6">Fechas Clave</h3>
            <div class="overflow-x-auto mb-4">
                <table class="w-full border-collapse my-4">
                    <thead>
                        <tr>
                            <th class="px-4 py-2 text-left bg-slate-100 text-slate-700 border border-slate-300 font-semibold">Evento</th>
                            <th class="px-4 py-2 text-left bg-slate-100 text-slate-700 border border-slate-300 font-semibold">Fecha Prevista</th>
                            <th class="px-4 py-2 text-left bg-slate-100 text-slate-700 border border-slate-300 font-semibold">Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="px-4 py-2 border border-slate-300">Revisión de Seguridad</td>
                            <td class="px-4 py-2 border border-slate-300">2023-11-15</td>
                            <td class="px-4 py-2 border border-slate-300">Pendiente</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 border border-slate-300">Lanzamiento Beta</td>
                            <td class="px-4 py-2 border border-slate-300">2023-11-30</td>
                            <td class="px-4 py-2 border border-slate-300">En progreso</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 border border-slate-300">Reunión de Stakeholders</td>
                            <td class="px-4 py-2 border border-slate-300">2023-12-05</td>
                            <td class="px-4 py-2 border border-slate-300">Programada</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <blockquote class="border-l-4 border-blue-500 pl-4 italic text-slate-700 my-4 py-2">
                "La colaboración es el combustible que permite a la gente común lograr resultados extraordinarios."
                <br>— Atlassian
            </blockquote>

            <hr class="my-8 border-t border-slate-200">

            <p class="mb-4 leading-relaxed">Para más información, consulte nuestra <a href="https://intranet.example.com/atlassian-radar-docs" class="text-blue-600 hover:text-blue-800 underline">documentación interna</a>.</p>
            <p class="mb-4 leading-relaxed">También puede ver el código fuente en <code class="bg-slate-100 text-slate-800 rounded px-1 py-0.5 font-mono text-sm">src/main.js</code>.</p>

            <pre class="bg-slate-800 text-white rounded-md p-4 overflow-x-auto text-sm font-mono my-4"><code class="language-javascript">// Ejemplo de código para mostrar el estilo
function initRadar() {
  console.log("Atlassian Radar inicializado.");
  // Más lógica aquí
}

initRadar();</code></pre>

        </div>
    </main>

    <!-- Script de Navegación Histórica -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const historicalNavigation = document.getElementById('historical-navigation');

            // Configuración del repositorio de GitHub
            const githubUser = 'raspes';
            const githubRepo = 'atlassian-radar'; // IMPORTANTE: Esta es la constante marcada
            const githubBranch = 'main';
            const baseUrl = `https://${githubUser}.github.io/${githubRepo}/`;
            const githubApiUrl = `https://api.github.com/repos/${githubUser}/${githubRepo}/contents?ref=${githubBranch}`;

            const fetchHistoricalReports = async () => {
                try {
                    const response = await fetch(githubApiUrl);
                    if (!response.ok) {
                        throw new Error(`GitHub API error: ${response.status} ${response.statusText}`);
                    }
                    const files = await response.json();

                    const htmlFiles = files
                        .filter(file => file.name.endsWith('.html') && file.name !== 'index.html' && file.name !== '404.html')
                        .sort((a, b) => b.name.localeCompare(a.name)); // Ordenar de más reciente a más antiguo por nombre

                    htmlFiles.forEach(file => {
                        const option = document.createElement('option');
                        option.value = file.name;
                        // Formatear el nombre para que sea más legible en el dropdown
                        const displayName = file.name
                            .replace('.html', '')
                            .replace(/-/g, ' ')
                            .split(' ')
                            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                            .join(' ');
                        option.textContent = displayName;
                        historicalNavigation.appendChild(option);
                    });

                } catch (error) {
                    console.error('Error al obtener los reportes históricos:', error);
                    // Opcional: Mostrar un mensaje de error al usuario
                    const option = document.createElement('option');
                    option.value = "";
                    option.textContent = "Error al cargar reportes";
                    historicalNavigation.appendChild(option);
                }
            };

            historicalNavigation.addEventListener('change', (event) => {
                const selectedFile = event.target.value;
                if (selectedFile) {
                    window.location.href = baseUrl + selectedFile;
                }
            });

            fetchHistoricalReports();
        });
    </script>
</body>
</html>